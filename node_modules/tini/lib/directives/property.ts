import { Directive } from "../component/directive";
import { Registry } from "./registry";

const propertyDirective: Directive = {
    attribute: (attr: Attr) => attr.nodeName.startsWith('[') && attr.nodeName.endsWith(']'),
    process: ({targetNode, attribute}) => {
        const prop = attribute.nodeName.slice(1, -1);
        const camelCased = prop.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });
        return (value: any) => {
            if (typeof value === 'undefined') {
                (<any>targetNode)[camelCased] = '';
                return;
            }
            (<any>targetNode)[camelCased] = value
        };
    }
}

Registry.register(propertyDirective);